# Maintainer: 

pkgname=pplib-git
pkgver=7_0_1.r97.g7a4d4f9a
pkgrel=1
pkgdesc="Collection of C++ functions and classes"
arch=(x86_64)
url="https://www.pfp.de/ppl/"
license=(BSD)
#depends=(pcre libtiff)
makedepends=(git nasm pcre sdl2 lame libshout sqlite3 libtiff imagemagick)
source=("git+https://github.com/pfedick/pplib.git")
sha256sums=('SKIP')

pkgver() {
  cd "${pkgname%-git}"
  git describe --long --tags | sed 's/^REL_//;s/\([^-]*-g\)/r\1/;s/-/./g'
}

build() {
  cd "${pkgname%-git}"
  ./configure \
    --with-libtiff=/usr \
    --with-pcre=/usr \
    --with-jpeg \
    --with-nasm \
    --with-sqlite3 \
    --with-mysql=no \
    --prefix=/usr
}

package() {
  cd "${pkgname%-git}"
  make DESTDIR="$pkgdir" install
  install -D LICENSE.TXT -t "${pkgdir}/usr/share/licenses/${pkgname}"
}


